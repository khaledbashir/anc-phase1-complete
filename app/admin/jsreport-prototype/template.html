<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <style>
        /* ===== GLOBAL RESET & FONTS ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        @import url('https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Work Sans', Arial, Helvetica, sans-serif;
            font-size: 10px;
            color: #1e293b;
            line-height: 1.4;
        }

        /* ===== PAGE SETUP ===== */
        @page {
            size: 8.5in 11in;
            margin: 60px 40px 70px 40px;
            @bottom-left {
                content: "www.anc.com";
                font-size: 7.5px;
                font-weight: 600;
                color: #0A52EF;
            }
            @bottom-right {
                content: "Page " counter(page) " of " counter(pages);
                font-size: 7px;
                color: #94a3b8;
            }
        }

        /* ===== COLOR PALETTE ===== */
        :root {
            --primary: #0A52EF;
            --primary-dark: #002C73;
            --primary-light: #EBF0FF;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --surface: #f8fafc;
            --text: #334155;
            --text-muted: #64748b;
        }

        /* ===== HEADER ===== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        .header-left h1 {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-dark);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .header-left .doc-type {
            font-size: 11px;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-top: 2px;
        }
        .header-right {
            text-align: right;
            font-size: 9px;
            color: var(--text-muted);
        }
        .header-right .date {
            font-weight: 600;
            color: var(--text);
        }

        /* ===== BLUE ACCENT BAR ===== */
        .accent-bar {
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 2px;
            margin-bottom: 16px;
        }

        /* ===== SECTION HEADERS ===== */
        .section-header {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
            margin-top: 16px;
        }
        .section-header .bar {
            width: 3px;
            height: 14px;
            border-radius: 1px;
            background: var(--primary);
            flex-shrink: 0;
        }
        .section-header h2 {
            font-size: 10px;
            font-weight: 600;
            color: var(--primary-dark);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin: 0;
        }

        /* ===== INTRO TEXT ===== */
        .intro { font-size: 10px; color: var(--text); margin-bottom: 16px; line-height: 1.5; }

        /* ===== PRICING TABLES ===== */
        .pricing-table {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 16px;
            /* THIS IS THE KEY — deterministic page break control */
            page-break-inside: avoid;
        }
        .pricing-header {
            display: grid;
            grid-template-columns: 8fr 4fr;
            padding: 4px 12px;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--primary);
        }
        .pricing-header .right { text-align: right; }
        .pricing-row {
            display: grid;
            grid-template-columns: 8fr 4fr;
            padding: 6px 12px;
            font-size: 10px;
            border-top: 1px solid var(--border-light);
            align-items: center;
            min-height: 28px;
        }
        .pricing-row:nth-child(even) { background: var(--surface); }
        .pricing-row .desc { color: var(--text); }
        .pricing-row .price {
            text-align: right;
            font-weight: 600;
            color: var(--primary-dark);
            white-space: nowrap;
        }
        .pricing-footer {
            border-top: 2px solid var(--border);
        }
        .pricing-subtotal {
            display: grid;
            grid-template-columns: 8fr 4fr;
            padding: 4px 12px;
            font-size: 10px;
            font-weight: 700;
            color: var(--text);
        }
        .pricing-tax {
            display: grid;
            grid-template-columns: 8fr 4fr;
            padding: 4px 12px;
            font-size: 10px;
            color: var(--text-muted);
        }
        .pricing-grand-total {
            display: grid;
            grid-template-columns: 8fr 4fr;
            padding: 6px 12px;
            border-top: 1px solid var(--primary);
            background: var(--primary-light);
        }
        .pricing-grand-total .label {
            font-weight: 700;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--primary-dark);
        }
        .pricing-grand-total .amount {
            text-align: right;
            font-weight: 700;
            font-size: 12px;
            color: var(--primary-dark);
        }

        /* ===== SPECS TABLE — ALL ARIAL, NO FONT FALLBACK ===== */
        .specs-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            font-family: Arial, Helvetica, sans-serif; /* FORCED — no math font fallback */
            font-size: 7px;
            page-break-inside: avoid;
        }
        .specs-table th {
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--primary);
            padding: 4px 8px;
            white-space: nowrap;
        }
        .specs-table td {
            padding: 4px 8px; /* 8px horizontal padding — prevents overlap */
            border-bottom: 1px solid #e5e7eb;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: Arial, Helvetica, sans-serif; /* Double-enforced */
        }
        .specs-table .name-col { width: 24%; font-weight: 600; word-break: break-word; }
        .specs-table .dim-col { width: 22%; white-space: nowrap; }
        .specs-table .pitch-col { width: 10%; text-align: right; white-space: nowrap; }
        .specs-table .res-col { width: 20%; text-align: right; white-space: nowrap; }
        .specs-table .bright-col { width: 14%; text-align: right; white-space: nowrap; }
        .specs-table .qty-col { width: 10%; text-align: right; }

        /* ===== NOTES / ASSUMPTIONS ===== */
        .notes {
            font-size: 9px;
            color: var(--text-muted);
            line-height: 1.5;
            margin-top: 16px;
        }
        .notes li { margin-bottom: 4px; }

        /* ===== SIGNATURE ===== */
        .signature-block {
            margin-top: 24px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }
        .sig-line {
            border-top: 1px solid var(--border);
            padding-top: 4px;
            font-size: 9px;
            color: var(--text-muted);
            margin-top: 40px;
        }

        /* ===== FORCE PAGE BREAK ===== */
        .page-break { page-break-before: always; }

        /* ===== UTILITY ===== */
        .text-right { text-align: right; }
        .font-bold { font-weight: 700; }
    </style>
</head>
<body>

    <!-- =============== PAGE 1: COVER + PRICING =============== -->
    <div class="accent-bar"></div>

    <div class="header">
        <div class="header-left">
            <h1>{{companyName}}</h1>
            <div class="doc-type">{{documentType}}</div>
        </div>
        <div class="header-right">
            <div class="date">{{date}}</div>
            <div>Proposal #{{proposalNumber}}</div>
        </div>
    </div>

    <div class="intro">
        <strong>RE: {{projectName}}</strong><br/>
        {{introText}}
    </div>

    <!-- PRICING TABLES — each one won't split -->
    {{#each pricingTables}}
    <div class="pricing-table">
        <div class="pricing-header">
            <div>{{this.label}}</div>
            <div class="right">PRICING</div>
        </div>
        {{#each this.items}}
        <div class="pricing-row">
            <div class="desc">{{this.description}}</div>
            <div class="price">{{this.price}}</div>
        </div>
        {{/each}}
        <div class="pricing-footer">
            {{#if this.subtotal}}
            <div class="pricing-subtotal">
                <div>SUBTOTAL</div>
                <div class="text-right">{{this.subtotal}}</div>
            </div>
            {{/if}}
            {{#if this.tax}}
            <div class="pricing-tax">
                <div>{{this.taxLabel}}</div>
                <div class="text-right">{{this.tax}}</div>
            </div>
            {{/if}}
            <div class="pricing-grand-total">
                <div class="label">GRAND TOTAL</div>
                <div class="amount">{{this.grandTotal}}</div>
            </div>
        </div>
    </div>
    {{/each}}

    <!-- =============== PAGE 2: TECHNICAL SPECS =============== -->
    <div class="page-break"></div>

    <div class="section-header">
        <div class="bar"></div>
        <h2>EXHIBIT A: TECHNICAL SPECIFICATIONS</h2>
    </div>

    <div style="border: 1px solid #cbd5e1; border-radius: 4px; overflow: hidden;">
        <table class="specs-table">
            <colgroup>
                <col class="name-col" />
                <col class="dim-col" />
                <col class="pitch-col" />
                <col class="res-col" />
                <col class="bright-col" />
                <col class="qty-col" />
            </colgroup>
            <thead>
                <tr>
                    <th style="text-align:left">DISPLAY NAME</th>
                    <th style="text-align:left">DIMENSIONS</th>
                    <th style="text-align:right">PITCH</th>
                    <th style="text-align:right">RESOLUTION</th>
                    <th style="text-align:right">BRIGHTNESS</th>
                    <th style="text-align:right">QTY</th>
                </tr>
            </thead>
            <tbody>
                {{#each screens}}
                <tr>
                    <td class="name-col">{{this.name}}</td>
                    <!-- PLAIN ASCII: ' for feet, x for multiplier — NO Unicode -->
                    <td class="dim-col">{{this.height}}' x {{this.width}}'</td>
                    <td class="pitch-col">{{this.pitch}}mm</td>
                    <td class="res-col">{{this.resH}} x {{this.resW}}</td>
                    <td class="bright-col">{{this.brightness}}</td>
                    <td class="qty-col">{{this.qty}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <!-- =============== NOTES =============== -->
    <div class="section-header" style="margin-top: 24px;">
        <div class="bar"></div>
        <h2>NOTES &amp; ASSUMPTIONS</h2>
    </div>
    <div class="notes">
        <ul>
            {{#each notes}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <!-- =============== SIGNATURE =============== -->
    <div class="signature-block">
        <div>
            <div class="sig-line">Authorized Signature — {{companyName}}</div>
        </div>
        <div>
            <div class="sig-line">Authorized Signature — {{clientName}}</div>
        </div>
    </div>

</body>
</html>
